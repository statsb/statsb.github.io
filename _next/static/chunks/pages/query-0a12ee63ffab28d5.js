(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[523],{9983:function(e,l,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/query",function(){return s(8746)}])},8746:function(e,l,s){"use strict";s.r(l),s.d(l,{default:function(){return u}});var r=s(5893),t=s(7294),a=s(3904),n=s.n(a),c=s(1163);function o(e){let{data:l,lowerThreshold:s,upperThreshold:t,filtered:a,darkTheme:c}=e;return(0,r.jsxs)("table",{className:"table table-hover table-sm ".concat(c?"table-dark":""),children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{scope:"col",className:n().th,children:"#"}),(0,r.jsx)("th",{scope:"col",className:n().th,children:"buySellRatio"}),(0,r.jsx)("th",{scope:"col",className:n().th,children:"buyVol"}),(0,r.jsx)("th",{scope:"col",className:n().th,children:"sellVol"}),(0,r.jsx)("th",{scope:"col",className:n().th,children:"timestamp"})]})}),(0,r.jsx)("tbody",{children:l.map((e,l)=>{let{buySellRatio:n,buyVol:o,sellVol:i,timestamp:d}=e,h=n<=s,u=n>=t;if(a&&!h&&!u)return null;let m=h?"danger":u?"success":"";return(0,r.jsxs)("tr",{className:!c&&m?"table-".concat(m):"",children:[(0,r.jsx)("th",{scope:"row",children:l+1}),(0,r.jsx)("td",{children:(0,r.jsx)("span",{className:m?"badge bg-".concat(m):"",children:n})}),(0,r.jsx)("td",{children:o}),(0,r.jsx)("td",{children:i}),(0,r.jsx)("td",{className:"small",children:"".concat(new Date(d).toLocaleTimeString().replace(":00 AM"," am").replace(":00 PM"," pm"),", ").concat(new Date(d).toLocaleDateString())})]},l)})})]})}let i=e=>new Promise(l=>setTimeout(l,e)),d=()=>{let e=(0,c.useRouter)(),l=e.asPath.split("/query#/")[1];console.log(l);let s=e=>{let{symbol:l,period:s,limit:r,lowerThreshold:t,upperThreshold:a,gap:n,filtered:c,notify:o}=e;history.replaceState({},"","/query#/".concat(l,"/").concat(s,"/").concat(r,"/").concat(t,"/").concat(a,"/").concat(n,"/").concat(Number(c),"/").concat(Number(o)))};if(null==l?void 0:l.length){let e=l.split("/");return{params:e,updateRoute:s}}return{params:[void 0,void 0,void 0,void 0,void 0],updateRoute:s}};function h(e){let{apikey:l,params:s,updateRoute:a}=e,{_symbol:c,_period:d,_limit:h,_lowerThreshold:u,_upperThreshold:m,_gap:p,_filtered:x,_notify:b}=s,[j,v]=(0,t.useState)(!1),[N,f]=(0,t.useState)(null!=c?c:"BTCUSDT"),[g,T]=(0,t.useState)(null!=d?d:"5m"),[y,_]=(0,t.useState)(null!=h?h:30),[w,S]=(0,t.useState)(null!=u?u:.8),D=(0,t.useRef)(null!=u?u:.8),[k,E]=(0,t.useState)(null!=m?m:1.2),C=(0,t.useRef)(null!=m?m:1.2),[R,F]=(0,t.useState)(null!=p?p:5),I=(0,t.useRef)(null!=p?p:5),[P,A]=(0,t.useState)(0),O=(0,t.useRef)(0),G=(0,t.useRef)(null),[L,M]=(0,t.useState)("1"===x),[H,Y]=(0,t.useState)("1"===b),K=(0,t.useRef)("1"===b),[U,B]=(0,t.useState)([]),[J,X]=(0,t.useState)(!1),q=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e?document.body.setAttribute("data-bs-theme","dark"):document.body.removeAttribute("data-bs-theme")};(0,t.useEffect)(()=>{let e=localStorage.getItem("DARK_THEME");"1"===e&&(X(!0),q(!0))},[]);let V=async e=>{let[l,s]=e;a({symbol:N,period:g,limit:y,lowerThreshold:w,upperThreshold:k,gap:R,filtered:L,notify:H,[l]:s})},W=()=>{let e=!L;M(e),V(["filtered",e])},z=()=>{let e=!H;K.current=e,Y(e),V(["notify",e])},Z=e=>{let l=e.currentTarget.value;f(l),V(["symbol",l])},Q=e=>{let l=e.currentTarget.value;T(l),V(["period",l])},$=e=>{let l=Number(e.currentTarget.value);S(l),D.current=l,V(["lowerThreshold",l])},ee=e=>{let l=Number(e.currentTarget.value);E(Number(e.currentTarget.value)),C.current=l,V(["upperThreshold",l])},el=e=>{let l=Number(e.currentTarget.value);F(l),I.current=l,O.current=0,A(0),V(["gap",l])},es=e=>{let l=Number(e.currentTarget.value);_(l),V(["limit",l])},er=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(O.current=60*I.current,A(60*I.current)),G.current=setTimeout(()=>{let e=Math.max(O.current-1,0);0===e?(en(),A(e)):(O.current=e,A(e),er())},1e3)},et=()=>{var e;null===(e=document.getElementById("audio"))||void 0===e||e.play()},ea=e=>{if(!e||!e.length)return;let l=0,s=0,r=JSON.parse(JSON.stringify(e));r.forEach(e=>{let{buySellRatio:r}=e;r<=D.current?l+=1:r>=C.current&&(s+=1)}),"undefined"!=typeof document&&(document.title="".concat(N," \uD83D\uDD34").concat(l," \uD83D\uDFE2").concat(s),K.current&&(l>0||s>0)&&et())},en=async()=>{clearTimeout(G.current),await i(0);try{v(!0);let e=await fetch("https://fapi.binance.com/futures/data/takerlongshortRatio?symbol=".concat(N,"&period=").concat(g,"&limit=").concat(y),{headers:{"X-MBX-APIKEY":l}}),s=await e.json();if(console.log(s),B(s),!s||!s.length)return;er(!0),ea(s)}catch(e){console.log(e),document.write(JSON.stringify(null==e?void 0:e.message))}finally{v(!1)}},ec=e=>{e.preventDefault(),en()},eo=()=>{window.localStorage.removeItem("APIKEY"),window.location.reload()};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("nav",{className:"navbar navbar-dark bg-dark mb-5 p-3 shadow-sm",children:(0,r.jsxs)("div",{className:"container-fluid",children:[(0,r.jsx)("a",{href:"/",children:(0,r.jsx)("strong",{className:"navbar-brand",children:"TEAM CRYPTO WHALE"})}),(0,r.jsxs)("div",{className:"d-flex",children:[(0,r.jsxs)("div",{className:"form-group toggle-box mr-50",children:[(0,r.jsx)("span",{className:"fs-5 p-1",children:"\uD83D\uDD06"}),(0,r.jsx)("input",{checked:J,onChange:e=>{q(!J),localStorage.setItem("DARK_THEME",J?"0":"1"),X(!J)},type:"checkbox",className:"form-check-input",id:"darkTheme"}),(0,r.jsx)("span",{className:"fs-5 p-1 invert",children:"\uD83C\uDF19"})]}),(0,r.jsx)("button",{className:"btn btn-outline-warning",onClick:eo,children:"Logout"})]})]})}),(0,r.jsx)("div",{className:"container",children:(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("div",{className:"col-sm-4 mb-5",children:(0,r.jsx)("div",{className:"card",children:(0,r.jsx)("div",{className:"card-body",children:(0,r.jsxs)("form",{onSubmit:ec,children:[(0,r.jsxs)("div",{className:"row",children:[(0,r.jsxs)("div",{className:"col-6 form-group mb-3",children:[(0,r.jsx)("label",{htmlFor:"symbol",children:"Symbol"}),(0,r.jsx)("input",{value:N,onChange:Z,type:"text",className:"form-control",id:"symbol","aria-describedby":"symbolHelp",placeholder:"symbol e.g. BTCUSDT"})]}),(0,r.jsxs)("div",{className:"col form-group mb-3",children:[(0,r.jsx)("label",{htmlFor:"period",children:"Period"}),(0,r.jsxs)("select",{value:g,onChange:Q,className:"form-control",id:"period",children:[(0,r.jsx)("option",{children:"1m"}),(0,r.jsx)("option",{children:"3m"}),(0,r.jsx)("option",{children:"5m"}),(0,r.jsx)("option",{children:"15m"}),(0,r.jsx)("option",{children:"30m"}),(0,r.jsx)("option",{children:"1h"}),(0,r.jsx)("option",{children:"2h"}),(0,r.jsx)("option",{children:"4h"}),(0,r.jsx)("option",{children:"6h"}),(0,r.jsx)("option",{children:"12h"}),(0,r.jsx)("option",{children:"1d"})]})]}),(0,r.jsxs)("div",{className:"col form-group mb-3",children:[(0,r.jsx)("label",{htmlFor:"lowerThreshold",children:"Limit"}),(0,r.jsx)("input",{value:y,onChange:es,type:"number",className:"form-control",id:"limit","aria-describedby":"limitHelp",placeholder:"limit (30 - 500)"})]})]}),(0,r.jsxs)("div",{className:"row",children:[(0,r.jsxs)("div",{className:"col form-group mb-3",children:[(0,r.jsx)("label",{htmlFor:"lowerThreshold",children:"LT"}),(0,r.jsx)("input",{value:w,onChange:$,type:"number",className:"form-control",id:"lowerThreshold","aria-describedby":"lowerThresholdHelp",placeholder:"lowerThreshold"})]}),(0,r.jsxs)("div",{className:"col form-group mb-3",children:[(0,r.jsx)("label",{htmlFor:"upperThreshold",children:"UT"}),(0,r.jsx)("input",{value:k,onChange:ee,type:"number",className:"form-control",id:"upperThreshold","aria-describedby":"upperThresholdHelp",placeholder:"upperThreshold"})]})]}),(0,r.jsx)("div",{className:"d-grid mt-3 mb-5",children:(0,r.jsx)("button",{disabled:j,type:"submit",className:"btn btn-block btn-warning mb-2",children:"Submit"})}),!!(null==U?void 0:U.length)&&(0,r.jsx)("div",{className:"row",children:(0,r.jsx)("div",{className:"col-sm mb-3",children:(0,r.jsx)("div",{className:"progress",style:{height:"30px"},children:(0,r.jsx)("div",{className:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar","aria-valuenow":75,"aria-valuemin":0,"aria-valuemax":100,style:{width:"".concat(Math.floor(P/(60*R)*100),"%")},children:(0,r.jsxs)("b",{className:n().progressFont,children:[P,"s"]})})})})}),(0,r.jsx)("div",{className:"row",children:(0,r.jsxs)("div",{className:"col form-group mb-3",children:[(0,r.jsx)("label",{htmlFor:"gap",children:"Refresh interval:"}),(0,r.jsxs)("select",{value:R,onChange:el,className:"form-control",id:"gap",children:[(0,r.jsx)("option",{value:.5,children:"30s"}),(0,r.jsx)("option",{value:1,children:"1m"}),(0,r.jsx)("option",{value:2,children:"2m"}),(0,r.jsx)("option",{value:3,children:"3m"}),(0,r.jsx)("option",{value:5,children:"5m"}),(0,r.jsx)("option",{value:15,children:"15m"}),(0,r.jsx)("option",{value:30,children:"30m"}),(0,r.jsx)("option",{value:60,children:"1h"})]})]})}),(0,r.jsxs)("div",{className:"row",children:[(0,r.jsxs)("div",{className:"col form-group toggle-box",children:[(0,r.jsx)("label",{className:"form-check-label",htmlFor:"filtered",children:"Filter"}),(0,r.jsx)("br",{}),(0,r.jsx)("input",{checked:L,onChange:W,type:"checkbox",className:"form-check-input",id:"filtered"})]}),(0,r.jsxs)("div",{className:"col form-group toggle-box",children:[(0,r.jsx)("label",{className:"form-check-label",htmlFor:"filtered",children:"Notify"}),(0,r.jsx)("br",{}),(0,r.jsx)("input",{checked:H,onChange:z,type:"checkbox",className:"form-check-input",id:"notify"})]})]})]})})})}),(0,r.jsx)("div",{className:"col-sm-1"}),(0,r.jsx)("div",{className:n().scrollable+" col-sm-7",children:(0,r.jsxs)("div",{className:n().relative,children:[j&&(0,r.jsx)("div",{className:n().loader,children:(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("div",{className:"spinner-border",role:"status",children:(0,r.jsx)("span",{className:"sr-only"})})})}),!!U.length&&(0,r.jsx)(o,{darkTheme:J,data:U,lowerThreshold:w,upperThreshold:k,filtered:L}),!!U&&!U.length&&!j&&(0,r.jsx)("div",{className:n().mt100+" text-muted text-center",children:"[No data]"}),(0,r.jsx)("audio",{src:"https://cdn.pixabay.com/download/audio/2021/08/09/audio_9f35254621.mp3?filename=notification-sound-7062.mp3",id:"audio",controls:!0,style:{display:"none"}})]})})]})})]})}function u(){let e=(0,c.useRouter)(),[l,s]=(0,t.useState)("PENDING"),[a,n]=(0,t.useState)(""),{params:o,updateRoute:i}=d(),[u,m,p,x,b,j,v,N]=o;if((0,t.useEffect)(()=>{let e=localStorage.getItem("APIKEY");e?(n(e),s("LOGGED_IN")):s("LOGGED_OUT")},[]),"PENDING"===l)return(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("div",{className:"spinner-border",role:"status",children:(0,r.jsx)("span",{className:"sr-only"})})});if("LOGGED_OUT"===l)e.replace("/login");else if("LOGGED_IN"===l&&u)return(0,r.jsx)(h,{apikey:a,params:{_symbol:u,_period:m,_limit:p,_lowerThreshold:x,_upperThreshold:b,_gap:j,_filtered:v,_notify:N},updateRoute:i});return null}},3904:function(e){e.exports={relative:"Theme_relative__pur1p",loader:"Theme_loader__zA8mM",checkbox:"Theme_checkbox__YD3JZ",biglabel:"Theme_biglabel__nP_i6",th:"Theme_th__TAoW7",invert:"Theme_invert__YsD9n",mt100:"Theme_mt100__MwpWt",progressFont:"Theme_progressFont__31R63",scrollable:"Theme_scrollable__IVugC"}},1163:function(e,l,s){e.exports=s(880)}},function(e){e.O(0,[774,888,179],function(){return e(e.s=9983)}),_N_E=e.O()}]);